<!DOCTYPE html>
<html lang="ja-jp">
  <head>
    <title>DQMSLツール集</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, maximum-scale=1.0, user-scalable=yes">
    <meta name="description" content="DQMSL(ドラゴンクエストモンスターズスーパーライト)のツール集です。">
    <meta name="keywords" content="DQMSL,ドラゴンクエストモンスターズスーパーライト,ツール,☆4,ステータスチェッカー,計算機">
    <link rel="shortcut icon" href="http://i.imgur.com/Ey2NRqL.jpg" type="image/jpeg">

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

    <!-- bootstrap -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- underscorejs -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  </head>

<html>

<style type="text/css">
body {
  background-image:url("http://i.imgur.com/Ey2NRqL.jpg");
  positon: relative;
  width: 100%;
  min-width:468px;
  height: 100%;
  -webkit-text-size-adjust: 100%;
}

.input {
  width: 40px;
}

#alpha {
  width: 100%;
  height: 100%;
  position: relative;
  background-color: white;
  background-color: rgba(255,255,255, 0.9);
  z-index: 10;
}
</style>
<script type="text/javascript" src="./monster.js"></script>

<script>
// Google Analytics
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-65925312-1', 'auto');
  ga('send', 'pageview');
</script>

<script type="text/javascript">
var maxStar4Count = 4;
var statusCount = 6;
var rankCount = 8;

var statusHP = 0;
var statusMP = 1;
var statusAT = 2;
var statusDF = 3;
var statusSP = 4;
var statusIN = 5;

// Star4 Caluclator
var star4Calc =
//    0  1  2  3  4 Star
    [[0, 0, 0, 0, 0],  // HP
     [0, 0, 0, 0, 0],  // MP
     [0, 0, 0, 0, 0],  // atack
     [0, 0, 0, 0, 0],  // defen
     [0, 0, 0, 0, 0],  // speed
     [0, 0, 0, 0, 0],  // intel
     [0, 0, 0, 0, 0]]; // total

// Star444444 Caluclator
var star444444CalcIn =
//   SS  S  A  B  C  D  E  F Rank
    [[0, 0, 0, 0, 0, 0, 0, 0],  // HP
     [0, 0, 0, 0, 0, 0, 0, 0],  // MP
     [0, 0, 0, 0, 0, 0, 0, 0],  // atack
     [0, 0, 0, 0, 0, 0, 0, 0],  // defen
     [0, 0, 0, 0, 0, 0, 0, 0],  // speed
     [0, 0, 0, 0, 0, 0, 0, 0],  // intel
     [0, 0, 0, 0, 0, 0, 0, 0]]; // total

// Star444444 Caluclator
var star444444CalcOut =
//   SS  S  A  B  C  D  E  F Rank
    [[0, 0, 0, 0, 0, 0, 0, 0],  // HP
     [0, 0, 0, 0, 0, 0, 0, 0],  // MP
     [0, 0, 0, 0, 0, 0, 0, 0],  // atack
     [0, 0, 0, 0, 0, 0, 0, 0],  // defen
     [0, 0, 0, 0, 0, 0, 0, 0],  // speed
     [0, 0, 0, 0, 0, 0, 0, 0],  // intel
     [0, 0, 0, 0, 0, 0, 0, 0]]; // total



// MaxStatus Caluclator
// 各ステ(HP, MP, AT, DF, SP, IN)毎の全 PU 組合せのステータス
var maxStatusForEachStar0 = [0];     // ☆0:  1通り
var maxStatusForEachStar1 = [0];     // ☆1:  1通り
var maxStatusForEachStar2 = [0, 0];  // ☆2:  2通り
var maxStatusForEachStar3 = [        // ☆3:  7通り
  0, 0, 0, 0, 0, 0, 0];
var maxStatusForEachStar4 = [        // ☆4: 77通り
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      //  1-10
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 11-20
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 21-30
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 31-40
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 41-50
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 51-60
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 61-70
  0, 0, 0, 0, 0, 0, 0];              // 71-77
var maxStatusForEachMaxStatus;       // 最大ステ値
var maxStatusForEachMaxStatusFlag = [// 最大ステになるPU組合わせ
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      //  1-10
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 11-20
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 21-30
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 31-40
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 41-50
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 51-60
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 61-70
  0, 0, 0, 0, 0, 0, 0];              // 71-77
var maxStatusForEachMaxStatusCount;  // 最大ステ作成に必要な☆0数

var maxStatusTotalMaxStatusFlag = [  // 各ステ毎に、最大ステで+1
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      //  1-10
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 11-20
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 21-30
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 31-40
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 41-50
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 51-60
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      // 61-70
  0, 0, 0, 0, 0, 0, 0];              // 71-77

  var maxStatusTotalStatusStar0 = 0;
  var maxStatusTotalStatusStar4 = 0;
  var maxStatusTotalStatusMaxStatus = 0;

var maxStatusHeadCount = [           // PU 組合せ毎の☆0モンスター必要数
   5, 6, 6, 7, 7, 8, 9, 6, 7, 7,     //  1-10
   8, 8, 9,10, 7, 8, 8, 9, 9,10,     // 11-20
  11, 8, 9, 9,10,10,11,12, 8, 9,     // 21-30
   9,10,10,11,12, 9,10,10,11,11,     // 31-40
  12,13, 9,10,10,11,11,12,13,10,     // 41-50
  11,11,12,12,13,14,10,11,11,12,     // 51-60
  12,13,14,11,12,12,13,13,14,15,     // 61-70
  12,13,13,14,14,15,16];             // 71-77

  var maxStatusPowerupCombination = [
    "☆3+☆0",
    "☆3(☆2(☆1+☆1)+☆0)+☆0",
    "☆3(☆2+☆1)+☆0",
    "☆3(☆2(☆1+☆1)+☆1)+☆0",
    "☆3(☆2+☆2)+☆0",
    "☆3(☆2(☆1+☆1)+☆2)+☆0",
    "☆3(☆2(☆1+☆1)+☆2(☆1+☆1))+☆0",
    "☆3+☆1",
    "☆3(☆2(☆1+☆1)+☆0)+☆1",
    "☆3(☆2+☆1)+☆1",
    "☆3(☆2(☆1+☆1)+☆1)+☆1",
    "☆3(☆2+☆2)+☆1",
    "☆3(☆2(☆1+☆1)+☆2)+☆1",
    "☆3(☆2(☆1+☆1)+☆2(☆1+☆1))+☆1",
    "☆3+☆2",
    "☆3(☆2(☆1+☆1)+☆0)+☆2",
    "☆3(☆2+☆1)+☆2",
    "☆3(☆2(☆1+☆1)+☆1)+☆2",
    "☆3(☆2+☆2)+☆2",
    "☆3(☆2(☆1+☆1)+☆2)+☆2",
    "☆3(☆2(☆1+☆1)+☆2(☆1+☆1))+☆2",
    "☆3+☆2(☆1+☆1)",
    "☆3(☆2(☆1+☆1)+☆0)+☆2(☆1+☆1)",
    "☆3(☆2+☆1)+☆2(☆1+☆1)",
    "☆3(☆2(☆1+☆1)+☆1)+☆2(☆1+☆1)",
    "☆3(☆2+☆2)+☆2(☆1+☆1)",
    "☆3(☆2(☆1+☆1)+☆2)+☆2(☆1+☆1)",
    "☆3(☆2(☆1+☆1)+☆2(☆1+☆1))+☆2(☆1+☆1)",
    "☆3+☆3",
    "☆3(☆2(☆1+☆1)+☆0)+☆3",
    "☆3(☆2+☆1)+☆3",
    "☆3(☆2(☆1+☆1)+☆1)+☆3",
    "☆3(☆2+☆2)+☆3",
    "☆3(☆2(☆1+☆1)+☆2)+☆3",
    "☆3(☆2(☆1+☆1)+☆2(☆1+☆1))+☆3",
    "☆3+☆3(☆2(☆1+☆1)+☆0)",
    "☆3(☆2(☆1+☆1)+☆0)+☆3(☆2(☆1+☆1)+☆0)",
    "☆3(☆2+☆1)+☆3(☆2(☆1+☆1)+☆0)",
    "☆3(☆2(☆1+☆1)+☆1)+☆3(☆2(☆1+☆1)+☆0)",
    "☆3(☆2+☆2)+☆3(☆2(☆1+☆1)+☆0)",
    "☆3(☆2(☆1+☆1)+☆2)+☆3(☆2(☆1+☆1)+☆0)",
    "☆3(☆2(☆1+☆1)+☆2(☆1+☆1))+☆3(☆2(☆1+☆1)+☆0)",
    "☆3+☆3(☆2+☆1)",
    "☆3(☆2(☆1+☆1)+☆0)+☆3(☆2+☆1)",
    "☆3(☆2+☆1)+☆3(☆2+☆1)",
    "☆3(☆2(☆1+☆1)+☆1)+☆3(☆2+☆1)",
    "☆3(☆2+☆2)+☆3(☆2+☆1)",
    "☆3(☆2(☆1+☆1)+☆2)+☆3(☆2+☆1)",
    "☆3(☆2(☆1+☆1)+☆2(☆1+☆1))+☆3(☆2+☆1)",
    "☆3+☆3(☆2(☆1+☆1)+☆1)",
    "☆3(☆2(☆1+☆1)+☆0)+☆3(☆2(☆1+☆1)+☆1)",
    "☆3(☆2+☆1)+☆3(☆2(☆1+☆1)+☆1)",
    "☆3(☆2(☆1+☆1)+☆1)+☆3(☆2(☆1+☆1)+☆1)",
    "☆3(☆2+☆2)+☆3(☆2(☆1+☆1)+☆1)",
    "☆3(☆2(☆1+☆1)+☆2)+☆3(☆2(☆1+☆1)+☆1)",
    "☆3(☆2(☆1+☆1)+☆2(☆1+☆1))+☆3(☆2(☆1+☆1)+☆1)",
    "☆3+☆3(☆2+☆2)",
    "☆3(☆2(☆1+☆1)+☆0)+☆3(☆2+☆2)",
    "☆3(☆2+☆1)+☆3(☆2+☆2)",
    "☆3(☆2(☆1+☆1)+☆1)+☆3(☆2+☆2)",
    "☆3(☆2+☆2)+☆3(☆2+☆2)",
    "☆3(☆2(☆1+☆1)+☆2)+☆3(☆2+☆2)",
    "☆3(☆2(☆1+☆1)+☆2(☆1+☆1))+☆3(☆2+☆2)",
    "☆3+☆3(☆2(☆1+☆1)+☆2)",
    "☆3(☆2(☆1+☆1)+☆0)+☆3(☆2(☆1+☆1)+☆2)",
    "☆3(☆2+☆1)+☆3(☆2(☆1+☆1)+☆2)",
    "☆3(☆2(☆1+☆1)+☆1)+☆3(☆2(☆1+☆1)+☆2)",
    "☆3(☆2+☆2)+☆3(☆2(☆1+☆1)+☆2)",
    "☆3(☆2(☆1+☆1)+☆2)+☆3(☆2(☆1+☆1)+☆2)",
    "☆3(☆2(☆1+☆1)+☆2(☆1+☆1))+☆3(☆2(☆1+☆1)+☆2)",
    "☆3+☆3(☆2(☆1+☆1)+☆2(☆1+☆1))",
    "☆3(☆2(☆1+☆1)+☆0)+☆3(☆2(☆1+☆1)+☆2(☆1+☆1))",
    "☆3(☆2+☆1)+☆3(☆2(☆1+☆1)+☆2(☆1+☆1))",
    "☆3(☆2(☆1+☆1)+☆1)+☆3(☆2(☆1+☆1)+☆☆2(☆1+☆1))",
    "☆3(☆2+☆2)+☆3(☆2(☆1+☆1)+☆2(☆1+☆1))",
    "☆3(☆2(☆1+☆1)+☆2)+☆3(☆2(☆1+☆1)+☆2(☆1+☆1))",
    "☆3(☆2(☆1+☆1)+☆2(☆1+☆1))+☆3(☆2(☆1+☆1)+☆2(☆1+☆1))",
  ];

function initializeMaxStatusForEach() {
  maxStatusForEachStar0[0] = 0;
  maxStatusForEachStar1[0] = 0;
  for (var i; i < 2; i++) maxStatusForEachStar2[i] = 0;
  for (var i; i < 7; i++) maxStatusForEachStar3[i] = 0;
  _.each(maxStatusForEachStar4, function(n, i){
    maxStatusForEachStar4[i] = 0;
//    console.log("maxStatusForEachStar4[" + i + "] = " + maxStatusForEachStar4[i]);
  })
  _.each(maxStatusForEachMaxStatusFlag, function(n, i){
    maxStatusForEachMaxStatusFlag[i] = 0;
  })

  maxStatusForEachMaxStatus = 0;
  maxStatusForEachMaxStatusCount = 0;
}

function calcMaxStatusAll(){
  // 最大ステ計算ボタン連打しても重複計算しないためにリセット
  resetMaxStatusTotal();

  calcMaxStatusForEach("HP");
  calcMaxStatusForEach("MP");
  calcMaxStatusForEach("AT");
  calcMaxStatusForEach("DF");
  calcMaxStatusForEach("SP");
  calcMaxStatusForEach("IN");

  // 0 が入力されていたら計算しない
  if (maxStatusTotalStatusStar0 == 0) return;

  // 組合せ計算
  var combinationId = calcMaxStatusPUConbination();

  //show
  // 8行目: 合計行
  var tdTotal;
  td = $("#maxStatusTotal td");
  // 8行2列: ☆0ステ
  td.eq(1).html(maxStatusTotalStatusStar0);
  // 8行3列: ☆4ステ
  td.eq(2).html(maxStatusTotalStatusStar4);
  // 8行4列: 最大ステ
  diff = maxStatusTotalStatusMaxStatus - maxStatusTotalStatusStar4;
  td.eq(3).html(maxStatusTotalStatusMaxStatus + "(+" + diff + ")");
  // 8行5列: ☆0モンスター必要数
  td.eq(4).html(maxStatusHeadCount[combinationId]);

  // 結論: PU 組合せ
  result = $("#maxStatusResult");
  result.html(maxStatusHeadCount[combinationId] + "体使用☆4 = " + maxStatusPowerupCombination[combinationId]);
}

function calcMaxStatusForEach(statusType) {
  // TODO この関数をステ6分に分割したい。

  // init
  initializeMaxStatusForEach();

  // get
  var td;
  if (statusType == "HP") td = $("#maxStatusHp td");
  if (statusType == "MP") td = $("#maxStatusMp td");
  if (statusType == "AT") td = $("#maxStatusAtack td");
  if (statusType == "DF") td = $("#maxStatusDefen td");
  if (statusType == "SP") td = $("#maxStatusSpeed td");
  if (statusType == "IN") td = $("#maxStatusIntel td");

  maxStatusForEachStar0[0] = td.eq(1).children().val();

  // 0 が入力されていたら計算しない
  if (maxStatusForEachStar0[0] == 0) return;

  // calc
  maxStatusForEachStar1[0]  = calcPowerup(maxStatusForEachStar0[0], maxStatusForEachStar0[0]);
  maxStatusForEachStar2[0]  = calcPowerup(maxStatusForEachStar1[0], maxStatusForEachStar0[0]);
  maxStatusForEachStar2[1]  = calcPowerup(maxStatusForEachStar1[0], maxStatusForEachStar1[0]);
  maxStatusForEachStar3[0]  = calcPowerup(maxStatusForEachStar2[0], maxStatusForEachStar0[0]);
  maxStatusForEachStar3[1]  = calcPowerup(maxStatusForEachStar2[1], maxStatusForEachStar0[0]);
  maxStatusForEachStar3[2]  = calcPowerup(maxStatusForEachStar2[0], maxStatusForEachStar1[0]);
  maxStatusForEachStar3[3]  = calcPowerup(maxStatusForEachStar2[1], maxStatusForEachStar1[0]);
  maxStatusForEachStar3[4]  = calcPowerup(maxStatusForEachStar2[0], maxStatusForEachStar2[0]);
  maxStatusForEachStar3[5]  = calcPowerup(maxStatusForEachStar2[1], maxStatusForEachStar2[0]);
  maxStatusForEachStar3[6]  = calcPowerup(maxStatusForEachStar2[1], maxStatusForEachStar2[1]);
  maxStatusForEachStar4[0]  = calcPowerup(maxStatusForEachStar3[0], maxStatusForEachStar0[0]);
  maxStatusForEachStar4[1]  = calcPowerup(maxStatusForEachStar3[1], maxStatusForEachStar0[0]);
  maxStatusForEachStar4[2]  = calcPowerup(maxStatusForEachStar3[2], maxStatusForEachStar0[0]);
  maxStatusForEachStar4[3]  = calcPowerup(maxStatusForEachStar3[3], maxStatusForEachStar0[0]);
  maxStatusForEachStar4[4]  = calcPowerup(maxStatusForEachStar3[4], maxStatusForEachStar0[0]);
  maxStatusForEachStar4[5]  = calcPowerup(maxStatusForEachStar3[5], maxStatusForEachStar0[0]);
  maxStatusForEachStar4[6]  = calcPowerup(maxStatusForEachStar3[6], maxStatusForEachStar0[0]);
  maxStatusForEachStar4[7]  = calcPowerup(maxStatusForEachStar3[0], maxStatusForEachStar1[0]);
  maxStatusForEachStar4[8]  = calcPowerup(maxStatusForEachStar3[1], maxStatusForEachStar1[0]);
  maxStatusForEachStar4[9]  = calcPowerup(maxStatusForEachStar3[2], maxStatusForEachStar1[0]);
  maxStatusForEachStar4[10] = calcPowerup(maxStatusForEachStar3[3], maxStatusForEachStar1[0]);
  maxStatusForEachStar4[11] = calcPowerup(maxStatusForEachStar3[4], maxStatusForEachStar1[0]);
  maxStatusForEachStar4[12] = calcPowerup(maxStatusForEachStar3[5], maxStatusForEachStar1[0]);
  maxStatusForEachStar4[13] = calcPowerup(maxStatusForEachStar3[6], maxStatusForEachStar1[0]);
  maxStatusForEachStar4[14] = calcPowerup(maxStatusForEachStar3[0], maxStatusForEachStar2[0]);
  maxStatusForEachStar4[15] = calcPowerup(maxStatusForEachStar3[1], maxStatusForEachStar2[0]);
  maxStatusForEachStar4[16] = calcPowerup(maxStatusForEachStar3[2], maxStatusForEachStar2[0]);
  maxStatusForEachStar4[17] = calcPowerup(maxStatusForEachStar3[3], maxStatusForEachStar2[0]);
  maxStatusForEachStar4[18] = calcPowerup(maxStatusForEachStar3[4], maxStatusForEachStar2[0]);
  maxStatusForEachStar4[19] = calcPowerup(maxStatusForEachStar3[5], maxStatusForEachStar2[0]);
  maxStatusForEachStar4[20] = calcPowerup(maxStatusForEachStar3[6], maxStatusForEachStar2[0]);
  maxStatusForEachStar4[21] = calcPowerup(maxStatusForEachStar3[0], maxStatusForEachStar2[1]);
  maxStatusForEachStar4[22] = calcPowerup(maxStatusForEachStar3[1], maxStatusForEachStar2[1]);
  maxStatusForEachStar4[23] = calcPowerup(maxStatusForEachStar3[2], maxStatusForEachStar2[1]);
  maxStatusForEachStar4[24] = calcPowerup(maxStatusForEachStar3[3], maxStatusForEachStar2[1]);
  maxStatusForEachStar4[25] = calcPowerup(maxStatusForEachStar3[4], maxStatusForEachStar2[1]);
  maxStatusForEachStar4[26] = calcPowerup(maxStatusForEachStar3[5], maxStatusForEachStar2[1]);
  maxStatusForEachStar4[27] = calcPowerup(maxStatusForEachStar3[6], maxStatusForEachStar2[1]);
  maxStatusForEachStar4[28] = calcPowerup(maxStatusForEachStar3[0], maxStatusForEachStar3[0]);
  maxStatusForEachStar4[29] = calcPowerup(maxStatusForEachStar3[1], maxStatusForEachStar3[0]);
  maxStatusForEachStar4[30] = calcPowerup(maxStatusForEachStar3[2], maxStatusForEachStar3[0]);
  maxStatusForEachStar4[31] = calcPowerup(maxStatusForEachStar3[3], maxStatusForEachStar3[0]);
  maxStatusForEachStar4[32] = calcPowerup(maxStatusForEachStar3[4], maxStatusForEachStar3[0]);
  maxStatusForEachStar4[33] = calcPowerup(maxStatusForEachStar3[5], maxStatusForEachStar3[0]);
  maxStatusForEachStar4[34] = calcPowerup(maxStatusForEachStar3[6], maxStatusForEachStar3[0]);
  maxStatusForEachStar4[35] = calcPowerup(maxStatusForEachStar3[0], maxStatusForEachStar3[1]);
  maxStatusForEachStar4[36] = calcPowerup(maxStatusForEachStar3[1], maxStatusForEachStar3[1]);
  maxStatusForEachStar4[37] = calcPowerup(maxStatusForEachStar3[2], maxStatusForEachStar3[1]);
  maxStatusForEachStar4[38] = calcPowerup(maxStatusForEachStar3[3], maxStatusForEachStar3[1]);
  maxStatusForEachStar4[39] = calcPowerup(maxStatusForEachStar3[4], maxStatusForEachStar3[1]);
  maxStatusForEachStar4[40] = calcPowerup(maxStatusForEachStar3[5], maxStatusForEachStar3[1]);
  maxStatusForEachStar4[41] = calcPowerup(maxStatusForEachStar3[6], maxStatusForEachStar3[1]);
  maxStatusForEachStar4[42] = calcPowerup(maxStatusForEachStar3[0], maxStatusForEachStar3[2]);
  maxStatusForEachStar4[43] = calcPowerup(maxStatusForEachStar3[1], maxStatusForEachStar3[2]);
  maxStatusForEachStar4[44] = calcPowerup(maxStatusForEachStar3[2], maxStatusForEachStar3[2]);
  maxStatusForEachStar4[45] = calcPowerup(maxStatusForEachStar3[3], maxStatusForEachStar3[2]);
  maxStatusForEachStar4[46] = calcPowerup(maxStatusForEachStar3[4], maxStatusForEachStar3[2]);
  maxStatusForEachStar4[47] = calcPowerup(maxStatusForEachStar3[5], maxStatusForEachStar3[2]);
  maxStatusForEachStar4[48] = calcPowerup(maxStatusForEachStar3[6], maxStatusForEachStar3[2]);
  maxStatusForEachStar4[49] = calcPowerup(maxStatusForEachStar3[0], maxStatusForEachStar3[3]);
  maxStatusForEachStar4[50] = calcPowerup(maxStatusForEachStar3[1], maxStatusForEachStar3[3]);
  maxStatusForEachStar4[51] = calcPowerup(maxStatusForEachStar3[2], maxStatusForEachStar3[3]);
  maxStatusForEachStar4[52] = calcPowerup(maxStatusForEachStar3[3], maxStatusForEachStar3[3]);
  maxStatusForEachStar4[53] = calcPowerup(maxStatusForEachStar3[4], maxStatusForEachStar3[3]);
  maxStatusForEachStar4[54] = calcPowerup(maxStatusForEachStar3[5], maxStatusForEachStar3[3]);
  maxStatusForEachStar4[55] = calcPowerup(maxStatusForEachStar3[6], maxStatusForEachStar3[3]);
  maxStatusForEachStar4[56] = calcPowerup(maxStatusForEachStar3[0], maxStatusForEachStar3[4]);
  maxStatusForEachStar4[57] = calcPowerup(maxStatusForEachStar3[1], maxStatusForEachStar3[4]);
  maxStatusForEachStar4[58] = calcPowerup(maxStatusForEachStar3[2], maxStatusForEachStar3[4]);
  maxStatusForEachStar4[59] = calcPowerup(maxStatusForEachStar3[3], maxStatusForEachStar3[4]);
  maxStatusForEachStar4[60] = calcPowerup(maxStatusForEachStar3[4], maxStatusForEachStar3[4]);
  maxStatusForEachStar4[61] = calcPowerup(maxStatusForEachStar3[5], maxStatusForEachStar3[4]);
  maxStatusForEachStar4[62] = calcPowerup(maxStatusForEachStar3[6], maxStatusForEachStar3[4]);
  maxStatusForEachStar4[63] = calcPowerup(maxStatusForEachStar3[0], maxStatusForEachStar3[5]);
  maxStatusForEachStar4[64] = calcPowerup(maxStatusForEachStar3[1], maxStatusForEachStar3[5]);
  maxStatusForEachStar4[65] = calcPowerup(maxStatusForEachStar3[2], maxStatusForEachStar3[5]);
  maxStatusForEachStar4[66] = calcPowerup(maxStatusForEachStar3[3], maxStatusForEachStar3[5]);
  maxStatusForEachStar4[67] = calcPowerup(maxStatusForEachStar3[4], maxStatusForEachStar3[5]);
  maxStatusForEachStar4[68] = calcPowerup(maxStatusForEachStar3[5], maxStatusForEachStar3[5]);
  maxStatusForEachStar4[69] = calcPowerup(maxStatusForEachStar3[6], maxStatusForEachStar3[5]);
  maxStatusForEachStar4[70] = calcPowerup(maxStatusForEachStar3[0], maxStatusForEachStar3[6]);
  maxStatusForEachStar4[71] = calcPowerup(maxStatusForEachStar3[1], maxStatusForEachStar3[6]);
  maxStatusForEachStar4[72] = calcPowerup(maxStatusForEachStar3[2], maxStatusForEachStar3[6]);
  maxStatusForEachStar4[73] = calcPowerup(maxStatusForEachStar3[3], maxStatusForEachStar3[6]);
  maxStatusForEachStar4[74] = calcPowerup(maxStatusForEachStar3[4], maxStatusForEachStar3[6]);
  maxStatusForEachStar4[75] = calcPowerup(maxStatusForEachStar3[5], maxStatusForEachStar3[6]);
  maxStatusForEachStar4[76] = calcPowerup(maxStatusForEachStar3[6], maxStatusForEachStar3[6]);

  //console.log("maxStatusForEachStar4 = " + maxStatusForEachStar4);

  maxStatusForEachMaxStatus = _.max(maxStatusForEachStar4);
  //console.log("maxStatusForEachMaxStatus = " + maxStatusForEachMaxStatus);

  var combination_min_search = 16;
  var combinationId = 0;
  var combination = _.each(maxStatusForEachStar4, function(n, i){
    //console.log("maxStatusForEachStar4[" + i + "] = ", maxStatusForEachStar4[i]);
    //console.log("i = " + i);
    //console.log("j = " + (maxStatusForEachStar4.length - 1 - i));
    var j = maxStatusForEachStar4.length - 1 - i; // i: 0 -> 76. j: 76 -> 0
    if (maxStatusForEachStar4[j] == maxStatusForEachMaxStatus){
      // ☆0必要数最低の PU 組合せを調べる。
      if (combination_min_search > maxStatusHeadCount[j]) {
          combination_min_search = maxStatusHeadCount[j];
          combinationId = j;
      }
      // 全ステータスが最高ステになる PU の組合せを調べる
      maxStatusTotalMaxStatusFlag[j] += 1;
      //console.log("maxStatusHeadCount[" + j + "] = ", + combination_min_search);
      //console.log("combination_min_search = " + combination_min_search);
    }
    return combination_min_search;
  });

  // 合計値計算
  calcMaxStatusCalcTotal();

  // show
	// 3列目: ☆4ステ
	td.eq(2).html(maxStatusForEachStar4[0]);
  // 4列目: maxstatus
  var diff = maxStatusForEachMaxStatus - maxStatusForEachStar4[0];
  td.eq(3).html(maxStatusForEachMaxStatus + "(+" + diff + ")");
  // 5列目: ☆0モンスター数
  td.eq(4).html(combination_min_search);
}

function calcMaxStatusPUConbination() {
  //console.log(maxStatusTotalMaxStatusFlag);
  //console.log(maxStatusHeadCount);

  // maxStatusTotalMaxStatusFlag の最大値を探す。
  // ＝必ず6になる。。。77番目では確実に。
  // TODO リファクタ
  var FlagMax = _.max(maxStatusTotalMaxStatusFlag);

  // maxStatusHeadCount[i] == 6 を探す。
  // これが結論
  var FlagMin = 16;
  var result_i;
  _.each(maxStatusTotalMaxStatusFlag, function(elm, i){
    if(FlagMax == maxStatusTotalMaxStatusFlag[i]){
      //console.log("i = " + i);
      //console.log("maxStatusHeadCount[i] = " + maxStatusHeadCount[i]);
      if(FlagMin > maxStatusHeadCount[i]){
        FlagMin = maxStatusHeadCount[i];
        //console.log("FlagMin = " + FlagMin);
        result_i = i;
      }
    }
  })

  return result_i;
}

function calcMaxStatusCalcTotal() {
  maxStatusTotalStatusStar0 += Number(maxStatusForEachStar0[0]);
  maxStatusTotalStatusStar4 += maxStatusForEachStar4[0];
  maxStatusTotalStatusMaxStatus += maxStatusForEachMaxStatus;
}

function resetMaxStatusAll() {
  resetMaxStatusForEach("HP");
  resetMaxStatusForEach("MP");
  resetMaxStatusForEach("AT");
  resetMaxStatusForEach("DF");
  resetMaxStatusForEach("SP");
  resetMaxStatusForEach("IN");

  // total
  resetMaxStatusTotal();
  var td;
  td = $("#maxStatusTotal td");
  td.eq(1).text(0);
  td.eq(2).text(0);
  td.eq(3).text("0");
  td.eq(4).text(0);
}

function resetMaxStatusForEach(statusType) {
  var td;
  if (statusType == "HP") td = $("#maxStatusHp td");
  if (statusType == "MP") td = $("#maxStatusMp td");
  if (statusType == "AT") td = $("#maxStatusAtack td");
  if (statusType == "DF") td = $("#maxStatusDefen td");
  if (statusType == "SP") td = $("#maxStatusSpeed td");
  if (statusType == "IN") td = $("#maxStatusIntel td");

	// zero clear
  initializeMaxStatusForEach();

  td.eq(1 + 0).children().val("");
  td.eq(1 + 1).text(0);
  td.eq(1 + 2).text(0);
  td.eq(1 + 3).text(0);

  var result = $("#maxStatusResult");
  result.text("");
}

function resetMaxStatusTotal() {
  maxStatusTotalStatusStar0 = 0;
  maxStatusTotalStatusStar4 = 0;
  maxStatusTotalStatusMaxStatus = 0;

  _.each(maxStatusTotalMaxStatusFlag, function(n, i){
    maxStatusTotalMaxStatusFlag[i] = 0;
  })
}

// Calc: from Star0 to Star1
function calcPowerup(statusBase, statusEsa) {
	var increment = Number(statusBase)
                  + Math.ceil(0.02 * statusBase)
                  + Math.ceil(0.02 * statusEsa);
	return increment;
}

// calc from Star0 to Star4
// ☆4計算(=☆0ステから☆4ステ計算)
function calcPowerupStar4(star0Status) {
	var star1Status = calcPowerup(star0Status, star0Status);
	var star2Status = calcPowerup(star1Status, star0Status);
	var star3Status = calcPowerup(star2Status, star0Status);
	var star4Status = calcPowerup(star3Status, star0Status);
	return star4Status;
}

// calc Tensei Increment
// 転生による増分計算(=☆4ステと☆0ステの20%)
function calcTransIncrement(star4Status, star0Status) {
	var calc = Math.ceil(0.2 * (star4Status - star0Status));
	return calc;
}

// calc from Star0 to Star44
// ☆44計算(=転生前モンスター☆0☆4と転生後☆0から、転生後☆44ステ計算)
function calcPowerupStar44(base0, before4, before0) {
	var base_04 = Number(base0) + calcTransIncrement(before4, before0);
	var base_1 = calcPowerup(base_04, base0);
	var base_2 = calcPowerup(base_1, base0);
	var base_3 = calcPowerup(base_2, base0);
	var base_4 = calcPowerup(base_3, base0);
	return base_4;
}

// ☆4シミュレータ合計値計算
function showStar4StatusTotal() {
	// 合計値は常に0クリアして再計算
	for (var i = 0; i < statusCount; i++) {
		star4Calc[statusCount][i] = 0;
	}

	// get
	// to number. avoid string.
	for (var i = 0; i < 6; i++) {
		if (!parseInt(star4Calc[i][0] > 0)) star4Calc[i][0] = Number(0);
	}

	star4Calc[0][0] = Number($("#star4Hp0").val());
	star4Calc[1][0] = Number($("#star4Mp0").val());
	star4Calc[2][0] = Number($("#star4Atack0").val());
	star4Calc[3][0] = Number($("#star4Defen0").val());
	star4Calc[4][0] = Number($("#star4Speed0").val());
	star4Calc[5][0] = Number($("#star4Intel0").val());

	// calc
	for (var i = 0; i < 6; i++) {
		star4Calc[6][0] += star4Calc[i][0]; // star0 total
		star4Calc[6][1] += star4Calc[i][1]; // star1 total
		star4Calc[6][2] += star4Calc[i][2]; // star2 total
		star4Calc[6][3] += star4Calc[i][3]; // star3 total
		star4Calc[6][4] += star4Calc[i][4]; // star4 total
	}

	// show
	var td = $("#star4Total td");

	// ☆0
	td.eq(1).html(star4Calc[6][0]);

	// ☆1 〜 ☆4
	for (var i = 0, len = td.length; i < len; i++) {
		var tmpStr = star4Calc[6][1 + i] + "<br>(+" + Number(star4Calc[6][1+ i] - star4Calc[6][i]) + ")";
		td.eq(2 + i).html(tmpStr);
	}
}

// ☆4シミュレータ：HP
function showStar4StatusHP() {
	// get
	star4Calc[0][0] = $("#star4Hp0").val();

	// calc
	for (var i = 0; i < 5; i++) {
		star4Calc[0][i+1] = calcPowerup(star4Calc[0][i], star4Calc[0][0]);
	}

	// show
	var td = $("#star4Hp td");
//	var td = $("#star4Hp").children('td');

	for (var i = 0; i < maxStar4Count; i++) {
		td.eq(2 + i).text(star4Calc[0][1 + i]);
		// eq(0) Status: HP
		// eq(1) ☆0
		// eq(2) ☆1
		// eq(3) ☆2
		// eq(4) ☆3
		// eq(5) ☆4
	}
//	$("#star4Hp1").html(star4Calc[0][1]);
//	$("#star4Hp2").html(star4Calc[0][2]);
//	$("#star4Hp3").html(star4Calc[0][3]);
//	$("#star4Hp4").html(star4Calc[0][4]);
	showStar4StatusTotal();
}

// ☆4シミュレータ：MP
function showStar4StatusMP() {
	// get
	star4Calc[1][0] = $("#star4Mp0").val();

	// calc
	for (var i = 0; i < 5; i++) {
		star4Calc[1][i+1] = calcPowerup(star4Calc[1][i], star4Calc[1][0]);
	}

	// show
	var td = $("#star4Mp td");
	for (var i = 0; i < maxStar4Count; i++) {
		td.eq(2 + i).text(star4Calc[1][1 + i]);
	}
	showStar4StatusTotal();
}

// ☆4シミュレータ：攻撃
function showStar4StatusAtack() {
	// get
	star4Calc[2][0] = $("#star4Atack0").val();

	// calc
	for (var i = 0; i < 5; i++) {
		star4Calc[2][i+1] = calcPowerup(star4Calc[2][i], star4Calc[2][0]);
	}

	// show
	var td = $("#star4Atack td");
	for (var i = 0; i < maxStar4Count; i++) {
		td.eq(2 + i).text(star4Calc[2][1 + i]);
	}
	showStar4StatusTotal();
}

// ☆4シミュレータ：防御
function showStar4StatusDefen() {
	// get
	star4Calc[3][0] = $("#star4Defen0").val();

	// calc
	for (var i = 0; i < 5; i++) {
		star4Calc[3][i+1] = calcPowerup(star4Calc[3][i], star4Calc[3][0]);
	}

	// show
	var td = $("#star4Defen td");
	for (var i = 0; i < maxStar4Count; i++) {
		td.eq(2 + i).text(star4Calc[3][1 + i]);
	}
	showStar4StatusTotal();
}

// ☆4シミュレータ：素早さ
function showStar4StatusSpeed() {
	// get
	star4Calc[4][0] = $("#star4Speed0").val();

	// calc
	for (var i = 0; i < 5; i++) {
		star4Calc[4][i+1] = calcPowerup(star4Calc[4][i], star4Calc[4][0]);
	}

	// show
	var td = $("#star4Speed td");
	for (var i = 0; i < maxStar4Count; i++) {
		td.eq(2 + i).text(star4Calc[4][1 + i]);
	}
	showStar4StatusTotal();
}

// ☆4シミュレータ：賢さ
function showStar4StatusIntel() {
	// get
	star4Calc[5][0] = $("#star4Intel0").val();

	// calc
	for (var i = 0; i < 5; i++) {
		star4Calc[5][i+1] = calcPowerup(star4Calc[5][i], star4Calc[5][0]);
	}

	// show
	var td = $("#star4Intel td");
	for (var i = 0; i < maxStar4Count; i++) {
		td.eq(2 + i).text(star4Calc[5][1 + i]);
	}
	showStar4StatusTotal();
}

function resetStar4() {
  // zero clear
  for (var i = 0; i < 7; i++) {
    for (var j = 0; j < 5; j++) {
      star4Calc[i][j] = 0;
    }
  }
  var tdHp = $("#star4Hp td");
  var tdMp = $("#star4Mp td");
  var tdAtack = $("#star4Atack td");
  var tdDefen = $("#star4Defen td");
  var tdSpeed = $("#star4Speed td");
  var tdIntel = $("#star4Intel td");
  var tdTotal = $("#star4Total td");

  tdHp.eq(1).children().val("");
  tdMp.eq(1).children().val("");
  tdAtack.eq(1).children().val("");
  tdDefen.eq(1).children().val("");
  tdSpeed.eq(1).children().val("");
  tdIntel.eq(1).children().val("");
  tdTotal.eq(1).html(0);

  for (var i = 0; i < 3; i++) {
    tdHp.eq(2 + i).html(0);
    tdMp.eq(2 + i).html(0);
    tdAtack.eq(2 + i).html(0);
    tdDefen.eq(2 + i).html(0);
    tdSpeed.eq(2 + i).html(0);
    tdIntel.eq(2 + i).html(0);
    tdTotal.eq(2 + i).html(0);
  }
}


// ☆444444シミュレータ
function calc_444444() {
	// init
	for (var i = 0; i < 7; i++) {
		for (var j = 0; j < 8; j++) {
			star444444CalcOut[i][j] = 0;
			star444444CalcIn[i][j]  = 0;
		}
	}

	var td;

	// for HP
	// get
	td = $("#star444444HpIn td");
	for (var i = 0; i < 8; i++) {
		star444444CalcIn[0][i] = td.eq(1 + i).children().val();
	}
/*
	star444444CalcIn[0][7] = $("#star444444HpRankF0").val();
	star444444CalcIn[0][6] = $("#star444444HpRankE0").val();
	star444444CalcIn[0][5] = $("#star444444HpRankD0").val();
	star444444CalcIn[0][4] = $("#star444444HpRankC0").val();
	star444444CalcIn[0][3] = $("#star444444HpRankB0").val();
	star444444CalcIn[0][2] = $("#star444444HpRankA0").val();
	star444444CalcIn[0][1] = $("#star444444HpRankS0").val();
	star444444CalcIn[0][0] = $("#star444444HpRankSS0").val();
*/

	// calc
	star444444CalcOut[0][7] = calcPowerupStar4(star444444CalcIn[0][7]);
	for (var i = 0; i < 7; i++) {
		star444444CalcOut[0][6-i] = calcPowerupStar44(star444444CalcIn[0][6-i], star444444CalcOut[0][7-i], star444444CalcIn[0][7-i]);
	}

	// show
	td = $("#star444444HpOut td");
	for (var i = 0, len = td.length; i < len; i++) {
		if (star444444CalcIn[0][i] > 0) td.eq(1 + i).html(star444444CalcOut[0][i]);
	}

	// for MP
	// get
	td = $("#star444444MpIn td");
	for (var i = 0; i < 8; i++) {
		star444444CalcIn[1][i] = td.eq(1 + i).children().val();
	}

	// calc
	star444444CalcOut[1][7] = calcPowerupStar4(star444444CalcIn[1][7]);
	for (var i = 0; i < 7; i++) {
		star444444CalcOut[1][6-i] = calcPowerupStar44(star444444CalcIn[1][6-i], star444444CalcOut[1][7-i], star444444CalcIn[1][7-i]);
	}

	// show
	td = $("#star444444MpOut td");
	for (var i = 0, len = td.length; i < len; i++) {
		if (star444444CalcIn[1][i] > 0) td.eq(1 + i).html(star444444CalcOut[1][i]);
	}


	// for atack
	// get
	td = $("#star444444AtackIn td");
	for (var i = 0; i < 8; i++) {
		star444444CalcIn[2][i] = td.eq(1 + i).children().val();
	}

	// calc
	star444444CalcOut[2][7] = calcPowerupStar4(star444444CalcIn[2][7]);
	for (var i = 0; i < 7; i++) {
		star444444CalcOut[2][6-i] = calcPowerupStar44(star444444CalcIn[2][6-i], star444444CalcOut[2][7-i], star444444CalcIn[2][7-i]);
	}

	// show
	td = $("#star444444AtackOut td");
	for (var i = 0, len = td.length; i < len; i++) {
		if (star444444CalcIn[2][i] > 0) td.eq(1 + i).html(star444444CalcOut[2][i]);
	}

	// for defen
	// get
	td = $("#star444444DefenIn td");
	for (var i = 0; i < 8; i++) {
		star444444CalcIn[3][i] = td.eq(1 + i).children().val();
	}

	// calc
	star444444CalcOut[3][7] = calcPowerupStar4(star444444CalcIn[3][7]);
	for (var i = 0; i < 7; i++) {
		star444444CalcOut[3][6-i] = calcPowerupStar44(star444444CalcIn[3][6-i], star444444CalcOut[3][7-i], star444444CalcIn[3][7-i]);
	}

	// show
	td = $("#star444444DefenOut td");
	for (var i = 0, len = td.length; i < len; i++) {
		if (star444444CalcIn[3][i] > 0) td.eq(1 + i).html(star444444CalcOut[3][i]);
	}

	// for speed
	// get
	td = $("#star444444SpeedIn td");
	for (var i = 0; i < 8; i++) {
		star444444CalcIn[4][i] = td.eq(1 + i).children().val();
	}

	// calc
	star444444CalcOut[4][7] = calcPowerupStar4(star444444CalcIn[4][7]);
	for (var i = 0; i < 7; i++) {
		star444444CalcOut[4][6-i] = calcPowerupStar44(star444444CalcIn[4][6-i], star444444CalcOut[4][7-i], star444444CalcIn[4][7-i]);
	}

	// show
	td = $("#star444444SpeedOut td");
	for (var i = 0, len = td.length; i < len; i++) {
		if (star444444CalcIn[4][i] > 0) td.eq(1 + i).html(star444444CalcOut[4][i]);
	}

	// for intel
	// get
	td = $("#star444444IntelIn td");
	for (var i = 0; i < 8; i++) {
		star444444CalcIn[5][i] = td.eq(1 + i).children().val();
	}

	// calc
	star444444CalcOut[5][7] = calcPowerupStar4(star444444CalcIn[5][7]);
	for (var i = 0; i < 7; i++) {
		star444444CalcOut[5][6-i] = calcPowerupStar44(star444444CalcIn[5][6-i], star444444CalcOut[5][7-i], star444444CalcIn[5][7-i]);
	}

	// show
	td = $("#star444444IntelOut td");
	for (var i = 0, len = td.length; i < len; i++) {
		if (star444444CalcIn[5][i] > 0) td.eq(1 + i).html(star444444CalcOut[5][i]);
	}

	// total
	// calc
	for (var i = 0; i < 6; i++) {
		// ☆0の合計値計算
		star444444CalcIn[6][7] += Number(star444444CalcIn[i][7]); //  F[total] +=  F[*]
		star444444CalcIn[6][6] += Number(star444444CalcIn[i][6]); //  E[total] +=  E[*]
		star444444CalcIn[6][5] += Number(star444444CalcIn[i][5]); //  D[total] +=  D[*]
		star444444CalcIn[6][4] += Number(star444444CalcIn[i][4]); //  C[total] +=  C[*]
		star444444CalcIn[6][3] += Number(star444444CalcIn[i][3]); //  B[total] +=  B[*]
		star444444CalcIn[6][2] += Number(star444444CalcIn[i][2]); //  A[total] +=  A[*]
		star444444CalcIn[6][1] += Number(star444444CalcIn[i][1]); //  S[total] +=  S[*]
		star444444CalcIn[6][0] += Number(star444444CalcIn[i][0]); // SS[total] += SS[*]

		// ☆4~444444の合計値計算
		star444444CalcOut[6][7] += star444444CalcOut[i][7];       //  F[total] +=  F[*]
		star444444CalcOut[6][6] += star444444CalcOut[i][6];       //  E[total] +=  E[*]
		star444444CalcOut[6][5] += star444444CalcOut[i][5];       //  D[total] +=  D[*]
		star444444CalcOut[6][4] += star444444CalcOut[i][4];       //  C[total] +=  C[*]
		star444444CalcOut[6][3] += star444444CalcOut[i][3];       //  B[total] +=  B[*]
		star444444CalcOut[6][2] += star444444CalcOut[i][2];       //  A[total] +=  A[*]
		star444444CalcOut[6][1] += star444444CalcOut[i][1];       //  S[total] +=  S[*]
		star444444CalcOut[6][0] += star444444CalcOut[i][0];       // SS[total] += SS[*]
	}

	// show
	// ☆0の合計値表示。ランク毎に入力されている場合のみ結果を表示
	td = $("#star444444TotalIn td");
	for (var i = 0, len = td.length; i < len; i++) {
		if (star444444CalcIn[6][i] > 0) td.eq(1 + i).text(star444444CalcIn[6][i]);
	}

	// ☆444444の合計値表示。ランク毎に入力されている場合のみ結果を表示
	td = $("#star444444TotalOut td");
	for (var i = 0, len = td.length; i < len; i++) {
		var tmpStr = star444444CalcOut[6][0 + i] + "<br>" + "(+" + (star444444CalcOut[6][0 + i] - star444444CalcIn[6][0 + i]) + ")";
		if (star444444CalcIn[6][0 + i] > 0) td.eq(1 + i).html(tmpStr);
	}
}

function reset_444444() {
	var tdHpIn     = $("#star444444HpIn td");
	var tdMpIn     = $("#star444444MpIn td");
	var tdAtackIn  = $("#star444444AtackIn td");
	var tdDefenIn  = $("#star444444DefenIn td");
	var tdSpeedIn  = $("#star444444SpeedIn td");
	var tdIntelIn  = $("#star444444IntelIn td");
	var tdTotalIn  = $("#star444444TotalIn td");

	var tdHpOut    = $("#star444444HpOut td");
	var tdMpOut    = $("#star444444MpOut td");
	var tdAtackOut = $("#star444444AtackOut td");
	var tdDefenOut = $("#star444444DefenOut td");
	var tdSpeedOut = $("#star444444SpeedOut td");
	var tdIntelOut = $("#star444444IntelOut td");
	var tdTotalOut = $("#star444444TotalOut td");

	// zero clear
	for (var i = 0; i < 7; i++) {
		for (var j = 0; j < rankCount; j++) {
			star444444CalcOut[i][j] = 0;
			star444444CalcIn[i][j]  = 0;
		}
	}

	for (var i = 0; i < rankCount; i++) {
		tdHpIn.eq(1 + i).children().val("");
		tdMpIn.eq(1 + i).children().val("");
		tdAtackIn.eq(1 + i).children().val("");
		tdDefenIn.eq(1 + i).children().val("");
		tdSpeedIn.eq(1 + i).children().val("");
		tdIntelIn.eq(1 + i).children().val("");
		tdTotalIn.eq(1 + i).text("");

		tdHpOut.eq(1 + i).text(0);
		tdMpOut.eq(1 + i).text(0);
		tdAtackOut.eq(1 + i).text(0);
		tdDefenOut.eq(1 + i).text(0);
		tdSpeedOut.eq(1 + i).text(0);
		tdIntelOut.eq(1 + i).text(0);
		tdTotalOut.eq(1 + i).text(0);
	}
}

function debugRankDorakie() {
	var monster = $.parseJSON(monsterJson);
	var index;
	var tdHp    = $("#star444444HpIn td");
	var tdMp    = $("#star444444MpIn td");
	var tdAtack = $("#star444444AtackIn td");
	var tdDefen = $("#star444444DefenIn td");
	var tdSpeed = $("#star444444SpeedIn td");
	var tdIntel = $("#star444444IntelIn td");
	var indexRankSS = 1;
	var indexRankS  = 2;
	var indexRankA  = 3;
	var indexRankB  = 4;
	var indexRankC  = 5;
	var indexRankD  = 6;
	var indexRankE  = 7;
	var indexRankF  = 8;

	var newLines = monster.monster.filter(function(item, index){
		if((item.No) == 902){
			tdHp.eq(indexRankA).children().val(monster.monster[index].HP);
			tdMp.eq(indexRankA).children().val(monster.monster[index].MP);
			tdAtack.eq(indexRankA).children().val(monster.monster[index].ST);
			tdDefen.eq(indexRankA).children().val(monster.monster[index].DF);
			tdSpeed.eq(indexRankA).children().val(monster.monster[index].SP);
			tdIntel.eq(indexRankA).children().val(monster.monster[index].IN);
			return true;
		}
		if((item.No) == 901){
			tdHp.eq(indexRankB).children().val(monster.monster[index].HP);
			tdMp.eq(indexRankB).children().val(monster.monster[index].MP);
			tdAtack.eq(indexRankB).children().val(monster.monster[index].ST);
			tdDefen.eq(indexRankB).children().val(monster.monster[index].DF);
			tdSpeed.eq(indexRankB).children().val(monster.monster[index].SP);
			tdIntel.eq(indexRankB).children().val(monster.monster[index].IN);
			return true;
		}
		if((item.No) == 850){
			tdHp.eq(indexRankC).children().val(monster.monster[index].HP);
			tdMp.eq(indexRankC).children().val(monster.monster[index].MP);
			tdAtack.eq(indexRankC).children().val(monster.monster[index].ST);
			tdDefen.eq(indexRankC).children().val(monster.monster[index].DF);
			tdSpeed.eq(indexRankC).children().val(monster.monster[index].SP);
			tdIntel.eq(indexRankC).children().val(monster.monster[index].IN);
			return true;
		}
		if((item.No) == 302){
			tdHp.eq(indexRankD).children().val(monster.monster[index].HP);
			tdMp.eq(indexRankD).children().val(monster.monster[index].MP);
			tdAtack.eq(indexRankD).children().val(monster.monster[index].ST);
			tdDefen.eq(indexRankD).children().val(monster.monster[index].DF);
			tdSpeed.eq(indexRankD).children().val(monster.monster[index].SP);
			tdIntel.eq(indexRankD).children().val(monster.monster[index].IN);
			return true;
		}
		if((item.No) == 322){
			tdHp.eq(indexRankE).children().val(monster.monster[index].HP);
			tdMp.eq(indexRankE).children().val(monster.monster[index].MP);
			tdAtack.eq(indexRankE).children().val(monster.monster[index].ST);
			tdDefen.eq(indexRankE).children().val(monster.monster[index].DF);
			tdSpeed.eq(indexRankE).children().val(monster.monster[index].SP);
			tdIntel.eq(indexRankE).children().val(monster.monster[index].IN);
			return true;
		}
		if((item.No) == 301){
			tdHp.eq(indexRankF).children().val(monster.monster[index].HP);
			tdMp.eq(indexRankF).children().val(monster.monster[index].MP);
			tdAtack.eq(indexRankF).children().val(monster.monster[index].ST);
			tdDefen.eq(indexRankF).children().val(monster.monster[index].DF);
			tdSpeed.eq(indexRankF).children().val(monster.monster[index].SP);
			tdIntel.eq(indexRankF).children().val(monster.monster[index].IN);
			return true;
		}
	});
}

function debugMaxStatusKandar() {
  var td;
  td = $("#maxStatusHp td");
  td.eq(1).children().val(618);
  td = $("#maxStatusMp td");
  td.eq(1).children().val(240);
  td = $("#maxStatusAtack td");
  td.eq(1).children().val(440);
  td = $("#maxStatusDefen td");
  td.eq(1).children().val(388);
  td = $("#maxStatusSpeed td");
  td.eq(1).children().val(341);
  td = $("#maxStatusIntel td");
  td.eq(1).children().val(260);
}

function debugMaxStatusPremiumSlime() {
  var td;
  td = $("#maxStatusHp td");
  td.eq(1).children().val(271);
  td = $("#maxStatusMp td");
  td.eq(1).children().val(48);
  td = $("#maxStatusAtack td");
  td.eq(1).children().val(218);
  td = $("#maxStatusDefen td");
  td.eq(1).children().val(182);
  td = $("#maxStatusSpeed td");
  td.eq(1).children().val(273);
  td = $("#maxStatusIntel td");
  td.eq(1).children().val(215);
}
</script>

<script type="text/javascript">
$(document).ready(function(){
});
</script>

<body>
<div id="alpha">

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <a class="navbar-brand" href="#">ふぁいばー計算機</a>
  </div>
</nav>

<div class="container" style="padding:50px 0px">
  <ul class="nav nav-tabs">
    <li class="active"><a href="#tabStar4" data-toggle="tab">☆4ステ</a></li>
    <li><a href="#tabStar444444" data-toggle="tab">☆444444</a></li>
    <li><a href="#tabMaxStatus" data-toggle="tab">最大ステ</a></li>
    <li><a href="#tabAbout" data-toggle="tab">About</a></li>
  </ul>

  <div class="tab-content">
    <div class="tab-pane active" id="tabStar4">
      <h3>☆4ステータス計算機</h3>
      <p>☆0ステータスを入力してね！</p>
      <div class="table-responsive">
        <table class="table table-bordered table-hover table-condensed">
          <thead>
            <tr>
              <td></td>
              <td>☆0ステ</td>
              <td>☆1ステ</td>
              <td>☆2ステ</td>
              <td>☆3ステ</td>
              <td>☆4ステ</td>
            </tr>
          </tbody>
          <tbody>
            <tr id="star4Hp">
              <td>HP</td>
              <td><input class="input" id="star4Hp0" type="number" min="0" onchange="showStar4StatusHP();"></td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star4Mp">
              <td>MP</td>
              <td><input class="input" id="star4Mp0" type="number" min="0" max="9999" onchange="showStar4StatusMP();"></td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star4Atack">
              <td>攻撃力</td>
              <td><input class="input" id="star4Atack0" type="number" min="0" max="9999" onchange="showStar4StatusAtack();"></td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star4Defen">
              <td>防御力</td>
              <td><input class="input" id="star4Defen0" type="number" min="0" max="9999" onchange="showStar4StatusDefen();"></td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star4Speed">
              <td>素早さ</td>
              <td><input class="input" id="star4Speed0" type="number" min="0" max="9999" onchange="showStar4StatusSpeed();"></td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star4Intel">
              <td>賢さ</td>
              <td><input class="input" id="star4Intel0" type="number" min="0" max="9999" onchange="showStar4StatusIntel();"></td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star4Total">
              <td>合計</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
          </tbody>
        </table>
      </div>
      <button class="btn btn-primary" onclick="resetStar4()">リセット</button>
    </div><!-- id="tabStar4" -->

    <div class="tab-pane" id="tabStar444444">
      <h3>☆4～444444ステータス計算機</h3>
      <div id="star444444">
        <p>☆0ステータスを入力してね！</p>
        <p>全て入力しなくても良いよ！</p>
        <div class="table-responsive">
          <table class="table table-bordered table-hover table-condensed">
            <thead>
              <tr>
                <td>☆0</td>
                <td>SS</td>
                <td>S</td>
                <td>A</td>
                <td>B</td>
                <td>C</td>
                <td>D</td>
                <td>E</td>
                <td>F</td>
              </tr>
            </thead>
            <tbody>
              <tr id="star444444HpIn">
                <td>HP</td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
              </tr>
              <tr id="star444444MpIn">
                <td>MP</td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
              </tr>
              <tr id="star444444AtackIn">
                <td>攻撃力</td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
              </tr>
              <tr id="star444444DefenIn">
                <td>防御力</td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
              </tr>
              <tr id="star444444SpeedIn">
                <td>素早さ</td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
              </tr>
              <tr id="star444444IntelIn">
                <td>賢さ</td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
                <td><input class="input" type="number" min="0" max="9999"></td>
              </tr>
              <tr id="star444444TotalIn">
                <td>合計</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>

        <button class="btn btn-primary" onclick="calc_444444()">☆4～444444計算！</button>
        <button class="btn btn-primary" onclick="reset_444444()">リセット</button>
        <button class="btn btn-primary" onclick="debugRankDorakie()">サンプル:ドラキー～グレドラのステ</button>

        <div class="table-responsive">
        <table class="table table-bordered table-hover table-condensed">
          <thead>
            <tr>
              <td>☆4～444444</td>
              <td>SS</td>
              <td>S</td>
              <td>A</td>
              <td>B</td>
              <td>C</td>
              <td>D</td>
              <td>E</td>
              <td>F</td>
            </tr>
          </thead>
          <tbody>
            <tr id="star444444HpOut">
              <td>HP</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star444444MpOut">
              <td>MP</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star444444AtackOut">
              <td>攻撃力</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star444444DefenOut">
              <td>防御力</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star444444SpeedOut">
              <td>素早さ</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star444444IntelOut">
              <td>賢さ</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
            <tr id="star444444TotalOut">
              <td>合計</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
              <td>0</td>
            </tr>
          </tbody>
        </table>
        </div>
      </div><!-- id="star444444" -->
    </div><!-- id="tabStar444444" -->

    <div class="tab-pane" id="tabMaxStatus">
      <h3>最大ステ計算機</h3>
      <p>最大ステとなる最小☆0モンスター数とパワーアップ組合せを計算します。</p>
      <p>☆0ステータスを入力してね！</p>
      <table class="table table-bordered table-hover table-condensed">
        <thead>
          <tr>
            <td></td>
            <td>☆0ステ</td>
            <td>☆4ステ</td>
            <td>最大ステ</td>
            <td>☆0モンスター必要数</td>
          </tr>
        </tbody>
        <tbody>
          <tr id="maxStatusHp">
            <td>HP</td>
            <td><input class="input" id="maxStatusHp0" type="number" min="0"></td>
            <td>0</td>
            <td>0</td>
            <td></td>
          </tr>
          <tr id="maxStatusMp">
            <td>MP</td>
            <td><input class="input" id="maxStatusMp0" type="number" min="0" max="9999"></td>
            <td>0</td>
            <td>0</td>
            <td></td>
          </tr>
          <tr id="maxStatusAtack">
            <td>攻撃力</td>
            <td><input class="input" id="maxStatusAtack0" type="number" min="0" max="9999"></td>
            <td>0</td>
            <td>0</td>
            <td></td>
          </tr>
          <tr id="maxStatusDefen">
            <td>防御力</td>
            <td><input class="input" id="maxStatusDefen0" type="number" min="0" max="9999"></td>
            <td>0</td>
            <td>0</td>
            <td></td>
          </tr>
          <tr id="maxStatusSpeed">
            <td>素早さ</td>
            <td><input class="input" id="maxStatusSpeed0" type="number" min="0" max="9999"></td>
            <td>0</td>
            <td>0</td>
            <td></td>
          </tr>
          <tr id="maxStatusIntel">
            <td>賢さ</td>
            <td><input class="input" id="maxStatusIntel0" type="number" min="0" max="9999"></td>
            <td>0</td>
            <td>0</td>
            <td></td>
          </tr>
          <tr id="maxStatusTotal">
            <td>合計</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td></td>
          </tr>
        </tbody>
      </table>

      <h4>結論:各ステが最大ステのPUの組合せは,,,</h4>
      <h4><div id="maxStatusResult">X体使用☆4=,,,</div></h4>
      <p>※特殊PUをカッコで表現しています</p>
      <br>
      <br>
      <button class="btn btn-primary" onclick="calcMaxStatusAll()">最大ステ計算！</button>
      <button class="btn btn-primary" onclick="resetMaxStatusAll()">リセット</button>
      <br>
      <button class="btn btn-primary" onclick="debugMaxStatusKandar()">サンプル:カンダタステ</button>
      <button class="btn btn-primary" onclick="debugMaxStatusPremiumSlime()">サンプル:プレスラステ</button>

    </div><!-- id="tabMaxStatus" -->

    <div class="tab-pane" id="tabAbout">
      <h3>About</h3>
      <p>要望や不具合は Twitter から連絡お願いします！</p>
      <a href="https://twitter.com/maxfiber">@maxfiber</a>
    </div><!-- id="tabAbout" -->
  </div><!-- id="tab-content" -->
</div>

<br>
<br>
<br>

<div id="admax">
<script src="http://adm.shinobi.jp/s/26e0d2b694e8fea433234a666dc01334"></script>
</div> <!-- id="admax" -->

</div><!-- id="alpha" -->

</body>
</html>
